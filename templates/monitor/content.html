<!-- SPDX-License-Identifier: MIT -->
<!-- Monitor Header -->
<div class="page-header">
    <h1 class="page-title">Server Monitor</h1>
    <p class="page-subtitle">Real-time server metrics and statistics</p>
</div>

<!-- Status Display -->
<div class="card monitor-status">
    <div id="status" class="status-indicator">
        <span class="status-text">Loading...</span>
    </div>
    <div class="last-updated">
        Last updated: <span id="last_updated">-</span> â€¢ Refreshes every 4s
    </div>
</div>

<!-- Chart Section -->
<div class="charts-container" id="chartsContainer">
  <div class="chart-card">
    <h2>Server Activity</h2>
    <div class="chart-wrapper">
      <canvas id="requestsChart"></canvas>
      <div class="chart-fallback">Loading chart data...</div>
    </div>
  </div>
  <div class="chart-card">
    <div class="chart-header">
      <h2>Memory Usage</h2>
      <button id="cleanup_memory_btn" class="cleanup-btn" title="Force memory cleanup for long-running processes">
        ðŸ§¹ Cleanup Memory
      </button>
    </div>
    <div class="chart-wrapper">
      <canvas id="memoryChart"></canvas>
      <div class="chart-fallback">Loading chart data...</div>
    </div>
    <div id="cleanup_status" class="cleanup-status"></div>
  </div>
  <div class="chart-card full-width">
    <h2>Upload Stats</h2>
    <div class="chart-wrapper">
      <canvas id="uploadsChart"></canvas>
      <div class="chart-fallback">Loading chart data...</div>
    </div>
  </div>
</div>

<!-- Metrics Cards Grid -->
<div class="metrics-grid">

    <!-- Server Status Card -->
    <div class="card metric-card">
        <div class="metric-title">Server Status</div>
        <div class="metric-info">
            <div>Uptime: <span id="uptime_pretty">-</span></div>
            <div>Total Seconds: <span id="uptime_secs">-</span></div>
        </div>
    </div>

    <!-- Request Statistics Card -->
    <div class="card metric-card">
        <div class="metric-title">Request Statistics</div>
        <div class="metric-info">
            <div>Total: <span id="req_total">-</span></div>
            <div>Successful: <span id="req_success">-</span></div>
            <div>Errors: <span id="req_errors">-</span></div>
            <div>Success Rate: <span id="req_success_rate">-</span></div>
        </div>
    </div>

    <!-- Download Statistics Card -->
    <div class="card metric-card">
        <div class="metric-title">Download Statistics</div>
        <div class="metric-info">
            <div>Bytes Served: <span id="bytes_served">-</span></div>
            <div>MB Served: <span id="mb_served">-</span></div>
        </div>
    </div>

    <!-- Upload Statistics Card -->
    <div class="card metric-card">
        <div class="metric-title">Upload Statistics</div>
        <div class="metric-info">
            <div>Total Uploads: <span id="up_total">-</span></div>
            <div>Successful: <span id="up_success">-</span></div>
            <div>Failed: <span id="up_failed">-</span></div>
            <div>Success Rate: <span id="upload_success_rate">-</span></div>
            <div>Data Uploaded: <span id="up_mb">-</span> MB</div>
            <div>Average File Size: <span id="avg_file_size">-</span></div>
        </div>
    </div>

    <!-- Performance Metrics Card -->
    <div class="card metric-card">
        <div class="metric-title">Performance Metrics</div>
        <div class="metric-info">
            <div>Largest Upload: <span id="largest_upload">-</span></div>
            <div>Concurrent Uploads: <span id="concurrent_uploads">-</span></div>
            <div>Avg Processing: <span id="avg_processing">-</span></div>
        </div>
    </div>



</div>